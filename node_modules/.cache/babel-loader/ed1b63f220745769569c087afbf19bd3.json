{"ast":null,"code":"var _jsxFileName = \"/root/modular-monolith-with-ddd-fe-react/src/login/login-control.tsx\";\nimport React, { useState } from \"react\";\nimport { HttpClient } from \"../shared/http-client\";\nimport { AuthenticationService } from \"./authentication/authentication-service\";\nimport { LoginForm } from \"./login-form\";\nimport { LogOutForm } from \"./logout-form\";\nexport function LoginControl() {\n  const [isAuthenticated, setIsAuthenticated] = useState(AuthenticationService.isAuthenticated());\n\n  function onSuccessfulLoginEvent() {\n    setIsAuthenticated(true);\n    HttpClient.get(\"api/userAccess/authenticatedUser\").then(data => {\n      AuthenticationService.setUserId(data.id);\n      document.location.href = '/';\n    });\n  }\n\n  function onLogOffEvent() {\n    setIsAuthenticated(false);\n    document.location.href = '/';\n  }\n\n  if (isAuthenticated) {\n    return /*#__PURE__*/React.createElement(LogOutForm, {\n      onLogOffEvent: onLogOffEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 16\n      }\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(LoginForm, {\n      onSuccessfulLoginEvent: onSuccessfulLoginEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }\n    }));\n  }\n}","map":{"version":3,"sources":["/root/modular-monolith-with-ddd-fe-react/src/login/login-control.tsx"],"names":["React","useState","HttpClient","AuthenticationService","LoginForm","LogOutForm","LoginControl","isAuthenticated","setIsAuthenticated","onSuccessfulLoginEvent","get","then","data","setUserId","id","document","location","href","onLogOffEvent"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,qBAAT,QAAsC,yCAAtC;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,UAAT,QAA2B,eAA3B;AAMA,OAAO,SAASC,YAAT,GAAwB;AAC3B,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCP,QAAQ,CAAUE,qBAAqB,CAACI,eAAtB,EAAV,CAAtD;;AAEA,WAASE,sBAAT,GAAkC;AAC9BD,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AAEAN,IAAAA,UAAU,CAACQ,GAAX,CAAyB,kCAAzB,EACKC,IADL,CACUC,IAAI,IAAI;AACVT,MAAAA,qBAAqB,CAACU,SAAtB,CAAgCD,IAAI,CAACE,EAArC;AACAC,MAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,GAAyB,GAAzB;AACH,KAJL;AAMH;;AACD,WAASC,aAAT,GAAyB;AACrBV,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAO,IAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,GAAyB,GAAzB;AACH;;AAED,MAAIV,eAAJ,EAAqB;AACjB,wBAAO,oBAAC,UAAD;AAAY,MAAA,aAAa,EAAEW,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH,GAFD,MAGK;AACD,wBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACJ,oBAAC,SAAD;AACI,MAAA,sBAAsB,EAAET,sBAD5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADI,CAAR;AAGH;AACJ","sourcesContent":["import React, { useState } from \"react\";\nimport { HttpClient } from \"../shared/http-client\";\nimport { AuthenticationService } from \"./authentication/authentication-service\";\nimport { LoginForm } from \"./login-form\";\nimport { LogOutForm } from \"./logout-form\";\n\ninterface UserInfo {\n    id: string\n}\n\nexport function LoginControl() {\n    const [isAuthenticated, setIsAuthenticated] = useState<boolean>(AuthenticationService.isAuthenticated());\n\n    function onSuccessfulLoginEvent() {\n        setIsAuthenticated(true);\n\n        HttpClient.get<UserInfo>(\"api/userAccess/authenticatedUser\")\n            .then(data => {\n                AuthenticationService.setUserId(data.id);\n                document.location.href = '/';\n            });\n\n    }\n    function onLogOffEvent() {\n        setIsAuthenticated(false);\n        document.location.href = '/';\n    }\n\n    if (isAuthenticated) {\n        return <LogOutForm onLogOffEvent={onLogOffEvent} />\n    }\n    else {\n        return (<div>\n            <LoginForm\n                onSuccessfulLoginEvent={onSuccessfulLoginEvent} /></div>)\n    }\n}"]},"metadata":{},"sourceType":"module"}